<!DOCTYPE html>
<html>
  <head>
    <title>Using loop to Evolve</title>
    <style type="text/css">
      .world {
        font-family: monospace;
        resize: none;
        border-width: 0
      }

      div {
        display: flex;
      }

      label {
        margin-right: 0.5em;
      }

      button {
        font-size: 16px;
        height: 35px;
        width: 35px;
        border-radius: 6px;
        border-width: 1px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .state-controls {
        display: none;
      }
    </style>
  </head>
  <body>
    <textarea id="world" class="world" disabled="disabled" cols="95" rows="30"></textarea>
    <p/>
    <div class="status">
      <label for="world-age">World Age:</label><div id="world-age"></div>
    </div>
    <div class="controls">
      <button id="stop" onclick="stop">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12" height="14" viewBox="0 0 12 14">
          <path d="M12 1.5v11q0 0.203-0.148 0.352t-0.352 0.148h-11q-0.203 0-0.352-0.148t-0.148-0.352v-11q0-0.203 0.148-0.352t0.352-0.148h11q0.203 0 0.352 0.148t0.148 0.352z"></path>
        </svg>
      </button>

      <button id="run">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="11" height="14" viewBox="0 0 11 14">
          <path d="M10.812 7.242l-10.375 5.766q-0.18 0.102-0.309 0.023t-0.129-0.281v-11.5q0-0.203 0.129-0.281t0.309 0.023l10.375 5.766q0.18 0.102 0.18 0.242t-0.18 0.242z"></path>
        </svg>
      </button>
      <button id="step">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="8" height="14" viewBox="0 0 8 14">
          <path d="M0.352 12.898q-0.148 0.148-0.25 0.102t-0.102-0.25v-11.5q0-0.203 0.102-0.25t0.25 0.102l5.547 5.547q0.062 0.062 0.102 0.148v-5.297q0-0.203 0.148-0.352t0.352-0.148h1q0.203 0 0.352 0.148t0.148 0.352v11q0 0.203-0.148 0.352t-0.352 0.148h-1q-0.203 0-0.352-0.148t-0.148-0.352v-5.297q-0.039 0.078-0.102 0.148z"></path>
        </svg>
      </button>
      <button id="run-for">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14" viewBox="0 0 14 14">
          <path d="M0.352 12.898q-0.148 0.148-0.25 0.102t-0.102-0.25v-11.5q0-0.203 0.102-0.25t0.25 0.102l5.547 5.547q0.062 0.062 0.102 0.148v-5.547q0-0.203 0.102-0.25t0.25 0.102l5.547 5.547q0.062 0.062 0.102 0.148v-5.297q0-0.203 0.148-0.352t0.352-0.148h1q0.203 0 0.352 0.148t0.148 0.352v11q0 0.203-0.148 0.352t-0.352 0.148h-1q-0.203 0-0.352-0.148t-0.148-0.352v-5.297q-0.039 0.078-0.102 0.148l-5.547 5.547q-0.148 0.148-0.25 0.102t-0.102-0.25v-5.547q-0.039 0.078-0.102 0.148z"></path>
        </svg>
      </button>
      <input id="run-for-input" pattern="[0-9]*" value="100"></input>
    </div>


    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12" height="14" viewBox="0 0 12 14">
      <symbol id="floppy-o" width="12" height="14" viewBox="0 0 12 14">
      <path d="M3 12h6v-3h-6v3zM10 12h1v-7q0-0.109-0.078-0.301t-0.156-0.27l-2.195-2.195q-0.078-0.078-0.266-0.156t-0.305-0.078v3.25q0 0.312-0.219 0.531t-0.531 0.219h-4.5q-0.312 0-0.531-0.219t-0.219-0.531v-3.25h-1v10h1v-3.25q0-0.312 0.219-0.531t0.531-0.219h6.5q0.312 0 0.531 0.219t0.219 0.531v3.25zM7 4.75v-2.5q0-0.102-0.074-0.176t-0.176-0.074h-1.5q-0.102 0-0.176 0.074t-0.074 0.176v2.5q0 0.102 0.074 0.176t0.176 0.074h1.5q0.102 0 0.176-0.074t0.074-0.176zM12 5v7.25q0 0.312-0.219 0.531t-0.531 0.219h-10.5q-0.312 0-0.531-0.219t-0.219-0.531v-10.5q0-0.312 0.219-0.531t0.531-0.219h7.25q0.312 0 0.688 0.156t0.594 0.375l2.188 2.187q0.219 0.219 0.375 0.594t0.156 0.688z"></path>
      </symbol>
    </svg>

       <div class="state-controls">
         <button id="reset">
           <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12" height="14" viewBox="0 0 12 14">
             <path d="M11.805 8.25q0 0.039-0.008 0.055-0.5 2.094-2.094 3.395t-3.734 1.301q-1.141 0-2.207-0.43t-1.902-1.227l-1.008 1.008q-0.148 0.148-0.352 0.148t-0.352-0.148-0.148-0.352v-3.5q0-0.203 0.148-0.352t0.352-0.148h3.5q0.203 0 0.352 0.148t0.148 0.352-0.148 0.352l-1.070 1.070q0.555 0.516 1.258 0.797t1.461 0.281q1.047 0 1.953-0.508t1.453-1.398q0.086-0.133 0.414-0.914 0.062-0.18 0.234-0.18h1.5q0.102 0 0.176 0.074t0.074 0.176zM12 2v3.5q0 0.203-0.148 0.352t-0.352 0.148h-3.5q-0.203 0-0.352-0.148t-0.148-0.352 0.148-0.352l1.078-1.078q-1.156-1.070-2.727-1.070-1.047 0-1.953 0.508t-1.453 1.398q-0.086 0.133-0.414 0.914-0.062 0.18-0.234 0.18h-1.555q-0.102 0-0.176-0.074t-0.074-0.176v-0.055q0.508-2.094 2.109-3.395t3.75-1.301q1.141 0 2.219 0.434t1.914 1.223l1.016-1.008q0.148-0.148 0.352-0.148t0.352 0.148 0.148 0.352z"></path>
           </svg>
         </button>
      <button id="save">
        &rsaquo;
        <svg class="floppy-o" width="12" height="14"><use href="#floppy-o" /> </svg>
      </button>
      <button id="load">
        <svg class="floppy-o" width="12" height="14"><use href="#floppy-o" /> </svg>
        &rsaquo;
      </button>
       </div>
       <p>
       For now, you'll need to poke around in the console to explore any more. <code>ANIMALS</code> holds all the evolving animals.
       The animal genes are weights for directions, with 1 (the second entry) being straight ahead:<p>
       <pre>
       0 1 2
       7 &uarr; 3
       6 5 4
       </pre>

       So if an animal's genes were <code>[1, 4, 1, 0, 0, 0, 0, 0]</code> you could imagine rolling a die and counting through the numbers: 1 &rarr; turn 45&deg; to the left, 2-5 &rarr; go straight ahead, 6 &rarr; turn 45&deg; to the right. If the animal had a 10 for every "gene", you'd need an 80 sided die, but it would have the same probability of turning in any direction<p>

       Each cycle, we generate one plant in a "jungle" area in the middle, and another in the broader map, and after 5,000,000 iterations, we expect to see two "species", one that hangs around in roughly the same place trying to stay in the jungle plants, and one that goes charging out over the map looking for the rest.

       The first animal will reproduce a bunch of times without having to find food, so it might be interesting to mess with it. You could kickstart the pessimistic breed by refreshing the page and copying this into the console: <code>ANIMALS[0].genes = [0, 0, 0, 1, 1, 10, 1, 1]</code></p>

       From there, you can watch the optimistic/explorer species evolve by tracking the forwards gene: <code>_.maxBy(ANIMALS, 'genes.1').genes</code>. I've added <code>optimism</code> or <code>pessimism</code> functions for this purpose too: <code>_.maxBy(ANIMALS, optimism).genes</code><p>

      They're not very good approximations, because the absolute values don't mean anything, but we just want to see that we will always get both eventually, no matter what we start with.
    <script src="lodash.min.js"></script>
    <script src="/skewer"></script>
    <script src="evolve.js"></script>
  </body>
</html>
